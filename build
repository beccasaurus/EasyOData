#! /bin/bash

clean() {
	echo "Cleaning Up"
	find . -name 'obj' -type d -exec rm -rfv {} \;
	rm -rfv bin
}

build_src() {
	echo "Building Source"
	mkdir -pv bin/Debug
	dmcs /debug:full /debug+ /optimize- /target:library /define:"DEBUG;TRACE" /out:bin/Debug/EasyOData.dll src/*.cs lib/Requestor/src/*.cs
}

build_spec() {
	echo "Building Specs"
	dmcs /debug:full /debug+ /optimize- /target:library /define:"DEBUG;TRACE" /out:bin/Debug/EasyOData.Specs.dll spec/*.cs \
	/reference:bin/Debug/EasyOData.dll /reference:lib/nunit.framework.dll /reference:lib/NUnit.Should.dll \
	&& cp -v lib/*.dll bin/Debug/
}

clean && build_src && build_spec

# /opt/mono-2.8/bin/dmcs execution started with arguments: /noconfig /debug:full /debug+ /optimize- /out:obj/Debug/Requestor.Specs.dll /home/remi/projects/Requestor/spec/CookiesSpec.cs /home/remi/projects/Requestor/spec/FakeResponseSpec.cs /home/remi/projects/Requestor/spec/GetSpec.cs /home/remi/projects/Requestor/spec/PostSpec.cs /home/remi/projects/Requestor/spec/PutAndDeleteSpec.cs /home/remi/projects/Requestor/spec/RequestInfoSpec.cs /home/remi/projects/Requestor/spec/ResponseSpec.cs /home/remi/projects/Requestor/spec/SettingHeadersSpec.cs /home/remi/projects/Requestor/spec/SpecHelper.cs /target:library /define:"DEBUG;TRACE" /reference:../lib/nunit.framework.dll /reference:../lib/NUnit.Should.dll /reference:/opt/mono-2.8/lib/mono/4.0/System.dll /reference:/opt/mono-2.8/lib/mono/4.0/System.Xml.dll /reference:/home/remi/projects/Requestor/bin/Debug//Requestor.dll /reference:/opt/mono-2.8/lib/mono/4.0/mscorlib.dll /reference:/opt/mono-2.8/lib/mono/4.0/System.Core.dll /reference:/opt/mono-2.8/lib/mono/4.0/System.Web.dll /warn:4

# /opt/mono-2.8/bin/gmcs execution started with arguments: /noconfig /debug:full /optimize+ /out:obj/Release/Requestor.dll /home/remi/projects/Requestor/src/AssemblyInfo.cs /home/remi/projects/Requestor/src/HttpRequestor.cs /home/remi/projects/Requestor/src/Requestor.cs /home/remi/projects/Requestor/src/Response.cs /home/remi/projects/Requestor/src/Vars.cs /target:library /define:TRACE /doc:../bin/Release/Requestor.xml /reference:/opt/mono-2.8/lib/mono/2.0/System.dll /reference:/opt/mono-2.8/lib/mono/2.0/System.Xml.dll /reference:/opt/mono-2.8/lib/mono/2.0/System.Web.dll /reference:/opt/mono-2.8/lib/mono/2.0/System.Core.dll /warn:4

# /opt/mono-2.8/bin/dmcs execution started with arguments: /noconfig /debug:full /optimize+ /out:obj/Release/Requestor.Specs.dll /home/remi/projects/Requestor/spec/CookiesSpec.cs /home/remi/projects/Requestor/spec/FakeResponseSpec.cs /home/remi/projects/Requestor/spec/GetSpec.cs /home/remi/projects/Requestor/spec/PostSpec.cs /home/remi/projects/Requestor/spec/PutAndDeleteSpec.cs /home/remi/projects/Requestor/spec/RequestInfoSpec.cs /home/remi/projects/Requestor/spec/ResponseSpec.cs /home/remi/projects/Requestor/spec/SettingHeadersSpec.cs /home/remi/projects/Requestor/spec/SpecHelper.cs /target:library /define:TRACE /reference:../lib/nunit.framework.dll /reference:../lib/NUnit.Should.dll /reference:/opt/mono-2.8/lib/mono/4.0/System.dll /reference:/opt/mono-2.8/lib/mono/4.0/System.Xml.dll /reference:/home/remi/projects/Requestor/bin/Release//Requestor.dll /reference:/opt/mono-2.8/lib/mono/4.0/mscorlib.dll /reference:/opt/mono-2.8/lib/mono/4.0/System.Core.dll /reference:/opt/mono-2.8/lib/mono/4.0/System.Web.dll /warn:4
